ALTER TABLE DB_IUMS.APP_SETTING
 DROP PRIMARY KEY CASCADE;

DROP TABLE DB_IUMS.APP_SETTING CASCADE CONSTRAINTS;

CREATE TABLE DB_IUMS.APP_SETTING
(
  ID               NUMBER                       NOT NULL,
  PARAMETER_NAME   VARCHAR2(20 BYTE),
  PARAMETER_VALUE  VARCHAR2(20 BYTE),
  DESCRIPTION      VARCHAR2(200 BYTE),
  LAST_MODIFIED    VARCHAR2(18 BYTE),
  DATA_TYPE        VARCHAR2(20 BYTE)
)
TABLESPACE SYSTEM
RESULT_CACHE (MODE DEFAULT)
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
LOGGING
NOCOMPRESS
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DB_IUMS.APP_SEETING_PK ON DB_IUMS.APP_SETTING
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER DB_IUMS.APP_SEETING_TRG
BEFORE INSERT ON DB_IUMS.APP_SETTING
FOR EACH ROW
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    NULL;
  END COLUMN_SEQUENCES;
END;
/


ALTER TABLE DB_IUMS.APP_SETTING ADD (
  CONSTRAINT APP_SEETING_PK
  PRIMARY KEY
  (ID)
  USING INDEX DB_IUMS.APP_SEETING_PK
  ENABLE VALIDATE);

Insert into DB_IUMS.APP_SETTING
   (ID, PARAMETER_NAME, PARAMETER_VALUE, DESCRIPTION, LAST_MODIFIED,
    DATA_TYPE)
 Values
   (1, 'clas start time', '08:00 AM', 'class start time', NULL,
    'timestamp');
Insert into DB_IUMS.APP_SETTING
   (ID, PARAMETER_NAME, PARAMETER_VALUE, DESCRIPTION, LAST_MODIFIED,
    DATA_TYPE)
 Values
   (2, 'class end time', '05:00 PM', 'class end time', NULL,
    'timestamp');
Insert into DB_IUMS.APP_SETTING
   (ID, PARAMETER_NAME, PARAMETER_VALUE, DESCRIPTION, LAST_MODIFIED,
    DATA_TYPE)
 Values
   (3, 'class duration', '50', 'class duration in minutes.', NULL,
    'number');
COMMIT;










ALTER TABLE DB_IUMS.CLASS_ROUTINE
 DROP PRIMARY KEY CASCADE;

DROP TABLE DB_IUMS.CLASS_ROUTINE CASCADE CONSTRAINTS;

CREATE TABLE DB_IUMS.CLASS_ROUTINE
(
  ROUTINE_ID     NUMBER                         NOT NULL,
  SEMESTER_ID    NUMBER,
  COURSE_ID      VARCHAR2(25 BYTE),
  SECTION        VARCHAR2(20 BYTE),
  YEAR           NUMBER,
  SEMESTER       NUMBER,
  START_TIME     VARCHAR2(20 BYTE),
  END_TIME       VARCHAR2(20 BYTE),
  LAST_MODIFIED  VARCHAR2(18 BYTE),
  DURATION       NUMBER,
  ROOM_NO        VARCHAR2(15 BYTE),
  DAY            VARCHAR2(20 BYTE),
  PROGRAM_ID     NUMBER,
  CLASS_TIME     NUMBER
)
TABLESPACE SYSTEM
RESULT_CACHE (MODE DEFAULT)
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
LOGGING
NOCOMPRESS
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON COLUMN DB_IUMS.CLASS_ROUTINE.DURATION IS 'Duration: 1 class =1, 2 class=2, here, class may be of 50 minutes, or 30 minutes. Each is considered as 1, this will help in col-span in the routine design.';

COMMENT ON COLUMN DB_IUMS.CLASS_ROUTINE.CLASS_TIME IS 'Class time is needed to be known. Class time varies during the month of ramadan. This time can be gathered from app_setting table.';



CREATE UNIQUE INDEX DB_IUMS.ROUTINE_PK ON DB_IUMS.CLASS_ROUTINE
(ROUTINE_ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER DB_IUMS.CLASS_ROUTINE_TRIGGER
BEFORE INSERT ON DB_IUMS.CLASS_ROUTINE
FOR EACH ROW
BEGIN
  SELECT DB_IUMS.SQN_CLASS_ROUTINE.NEXTVAL
  INTO   :new.ROUTINE_ID
  FROM   dual;
END;
/


ALTER TABLE DB_IUMS.CLASS_ROUTINE ADD (
  CONSTRAINT ROUTINE_PK
  PRIMARY KEY
  (ROUTINE_ID)
  USING INDEX DB_IUMS.ROUTINE_PK
  ENABLE VALIDATE);

Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (243, 11012016, 'EEE3207_S2014_110500', 'A', 3,
    2, '09.40 AM', '10.30 AM', '20160903120731', 1,
    'R-5A03', '1', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (244, 11012016, 'EEE3210_S2014_110500', 'A1', 3,
    2, '10.30 AM', '01.00 PM', '20160903121020', 3,
    'R-2A05', '1', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (245, 11012016, 'EEE3208_S2014_110500', 'A1', 3,
    2, '10.30 AM', '01.00 PM', '20160903121038', 3,
    'R-2A05', '1', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (246, 11012016, 'EEE3210_S2014_110500', 'A2', 3,
    2, '10.30 AM', '01.00 PM', '20160903121122', 3,
    'R-2A05', '2', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (247, 11012016, 'EEE3205_S2014_110500', 'A', 3,
    2, '01.00 PM', '01.50 PM', '20160903121243', 1,
    'R-2A05', '2', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (248, 11012016, 'EEE3209_S2014_110500', 'A', 3,
    2, '01.50 PM', '02.40 PM', '20160903121306', 1,
    'R-2A05', '2', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (249, 11012016, 'EEE3203_S2014_110500', 'A', 3,
    2, '02.40 PM', '03.30 PM', '20160903121347', 1,
    'R-2A05', '2', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (250, 11012016, 'EEE3217_S2014_110500', 'A', 3,
    2, '08.00 AM', '08.50 AM', '20160903121409', 1,
    'R-2A05', '3', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (251, 11012016, 'EEE3209_S2014_110500', 'A', 3,
    2, '08.50 AM', '09.40 AM', '20160903121424', 1,
    'R-2A05', '3', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (252, 11012016, 'EEE3207_S2014_110500', 'A', 3,
    2, '09.40 AM', '10.30 AM', '20160903121446', 1,
    'R-2A05', '3', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (253, 11012016, 'EEE3218_S2014_110500', 'A1', 3,
    2, '10.30 AM', '01.00 PM', '20160903121515', 3,
    'R-2A05', '4', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (254, 11012016, 'EEE3203_S2014_110500', 'A', 3,
    2, '01.00 PM', '01.50 PM', '20160903121602', 1,
    'R-2A05', '4', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (255, 11012016, 'EEE3205_S2014_110500', 'A', 3,
    2, '01.50 PM', '02.40 PM', '20160903121628', 1,
    'R-2A05', '4', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (256, 11012016, 'EEE3207_S2014_110500', 'A', 3,
    2, '02.40 PM', '03.30 PM', '20160903121645', 1,
    'R-2A05', '4', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (257, 11012016, 'EEE3205_S2014_110500', 'A', 3,
    2, '01.00 PM', '01.50 PM', '20160903121709', 1,
    'R-2A05', '5', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (258, 11012016, 'EEE3203_S2014_110500', 'A', 3,
    2, '01.50 PM', '02.40 PM', '20160903121725', 1,
    'R-2A05', '5', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (259, 11012016, 'EEE3217_S2014_110500', 'A', 3,
    2, '02.40 PM', '03.30 PM', '20160903121749', 1,
    'R-2A05', '5', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (260, 11012016, 'EEE3218_S2014_110500', 'A2', 3,
    2, '10.30 AM', '01.00 PM', '20160903121827', 3,
    'R-2A05', '6', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (261, 11012016, 'EEE3208_S2014_110500', 'A1', 3,
    2, '01.00 PM', '03.30 PM', '20160903121931', 3,
    'R-2A05', '6', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (241, 11012016, 'EEE3217_S2014_110500', 'A', 3,
    2, '08.00 AM', '08.50 AM', '20160903120413', 1,
    'R-5A03', '1', 110500, 50);
Insert into DB_IUMS.CLASS_ROUTINE
   (ROUTINE_ID, SEMESTER_ID, COURSE_ID, SECTION, YEAR,
    SEMESTER, START_TIME, END_TIME, LAST_MODIFIED, DURATION,
    ROOM_NO, DAY, PROGRAM_ID, CLASS_TIME)
 Values
   (242, 11012016, 'EEE3209_S2014_110500', 'A', 3,
    2, '08.50 AM', '09.40 AM', '20160903120527', 1,
    'R-5A03', '1', 110500, 50);
COMMIT;

